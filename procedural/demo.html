<!doctype html>
<html lang="en">

<head> 
	<title> Game Wrapper Test </title>
</head>

<body style='margin: 0px; background-color: #d8e7ff; overflow: hidden;'>

	<script src="../loader.js"></script>
	<script>

		_Assign_Root_Directory('../');
		_Load_From_Folder_Index('threejs', () => {
			_Load_From_Folder_Index('facade', () => {
				_Load_From_Folder_Index('procedural', () => {
					_Gm.scene.fog = new THREE.FogExp2( 0xd0e0f0, 0.0025 );
					_Gm.camera.position.y = 80;
					Init3DWebGLThingamajigs();
				});
			});
		});


		Init3DWebGLThingamajigs = () => {

			//////////////////////////////////////////////////////////////////////////////////
			//		add an object and make it move					//
			//////////////////////////////////////////////////////////////////////////////////		
			let light	= new THREE.HemisphereLight( 0xfffff0, 0x101020, 1.25 );
			light.position.set( 0.75, 1, 0.25 );
			_Gm.scene.add( light );
			/**/
			
			//////////////////////////////////////////////////////////////////////////////////
			//		comment								//
			//////////////////////////////////////////////////////////////////////////////////
			
			let city = ProceduralCity(_Gm.renderer)
			_Gm.scene.add(city)
			
			//////////////////////////////////////////////////////////////////////////////////
			//		Camera Controls							//
			//////////////////////////////////////////////////////////////////////////////////
			/*
			var controls	= new THREE.FirstPersonControls( camera );
			controls.movementSpeed	= 20;
			controls.lookSpeed	= 0.05;
			controls.lookVertical	= true;
			updateFcts.push(function(delta, now){
				controls.update( delta );		
			})
			/**/
			
			//////////////////////////////////////////////////////////////////////////////////
			//		loop runner							//
			//////////////////////////////////////////////////////////////////////////////////
			/*
			var lastTimeMsec= null
			requestAnimationFrame(function animate(nowMsec){
				// keep looping
				requestAnimationFrame( animate );
				// measure time
				lastTimeMsec	= lastTimeMsec || nowMsec-1000/60
				var deltaMsec	= Math.min(200, nowMsec - lastTimeMsec)
				lastTimeMsec	= nowMsec
				// call each update function
				updateFcts.forEach(function(updateFn){
					updateFn(deltaMsec/1000, nowMsec/1000)
				})
			})
			/**/

		};
	</script>

</body>
